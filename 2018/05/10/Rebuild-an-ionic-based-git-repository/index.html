<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Rebuild an ionic based git repository · Robin's Blog</title><meta name="description" content="Rebuild an ionic based git repository - Li Wenzhi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/wali-2.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://lwz7512.github.io/atom.xml" title="Robin's Blog"></head><body><div class="wrap"><header><div class="title-bar">Robin's Blog<button type="button" class="ltmenu"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><a href="/" class="logo-link"><img src="/wali-2.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/works/" target="_self" class="nav-list-link">WORKS</a></li><li class="nav-list-item"><a href="/opensource/" target="_self" class="nav-list-link">OPENSOURCE</a></li><li class="nav-list-item"><a href="/notes/" target="_self" class="nav-list-link">QUICKNOTES</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Rebuild an ionic based git repository</h1><div class="post-info">May 10, 2018</div><div class="post-content"><h3 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h3><p>Yesterday my colleague submitted an ionic project to github, my task is to use the repository to package a Android &amp; ios installation file.  But after I cloned the repository, running <code>cordova prepare</code> in console, it reported:</p>
<blockquote>
<p>Error: Current working directory is not a Cordova-based project.</p>
</blockquote>
<p>what?</p>
<p>I searched many results and tried the solutions, but still the same error! I had to figure out what’s the difference of this repository and the blank new ionic2 project.</p>
<h3 id="Snippets"><a href="#Snippets" class="headerlink" title="Snippets"></a>Snippets</h3><p>to create a blank new ionic2 project, run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ionic start blanknewio2 --v2 --ts</span><br></pre></td></tr></table></figure>
<p>Compared with the local blank new ionic2 project, cloned project missed a <code>www</code> directory:</p>
<p><img src="/img/ionic2.png" alt=""></p>
<p>The answer is clear now, www directory is ignored and not committed! By checking the <code>.gitignore</code> file in both projects, <code>www/</code> is included in without any unexpected.</p>
<p>So, mannually create a www directory then rerun the installation commands:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir www</span><br><span class="line">$ cordova prepare</span><br><span class="line">$ npm i</span><br></pre></td></tr></table></figure>
<p>now, it’s ready to build ionic app source to each platform :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ionic build android --prod</span><br><span class="line">$ ionic build ios --prod</span><br></pre></td></tr></table></figure>
<p>DONE!</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/06/14/My-First-RNA-AwesomeNote4Kids-Released/" class="prev">上一篇</a><a href="/2018/05/09/The-right-way-to-run-react-native-audio-example-successfully/" class="next">下一篇</a></div><div class="copyright"><p>© 2018 <a href="https://lwz7512.github.io">Li Wenzhi</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><!--@2018/04/06--><script>var $toggle = document.querySelector('.ltmenu');
var $navbar = document.querySelector('ul.nav');
$toggle.addEventListener('click', function(){
 if ($navbar.classList.contains('in')) {
    $navbar.classList.remove('in');
 }else{
    $navbar.classList.add('in');
 }
});</script></body></html>