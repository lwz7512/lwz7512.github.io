<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> stuck at Starting packager... · Robin's Blog</title><meta name="description" content="stuck at Starting packager... - Li Wenzhi"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/wali-2.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://lwz7512.github.io/atom.xml" title="Robin's Blog"></head><body><div class="wrap"><header><div class="title-bar">Robin's Blog<button type="button" class="ltmenu"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><a href="/" class="logo-link"><img src="/wali-2.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/works/" target="_self" class="nav-list-link">WORKS</a></li><li class="nav-list-item"><a href="/opensource/" target="_self" class="nav-list-link">OPENSOURCE</a></li><li class="nav-list-item"><a href="/notes/" target="_self" class="nav-list-link">QUICKNOTES</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">stuck at Starting packager...</h1><div class="post-info">Apr 6, 2018</div><div class="post-content"><p>Recently I started to learn react-native app development from zero. Reactjs/react-native has emerging for couples of years, and growing to a very big and mature ecosystem. I have given a glimpse to it, but can not be accustomed with JSX way to mingle script/template/style into one file. As an AngularJS/Ionic developer for almost 4 years, I gradually realized the limitation of the Ionic/Cordova approach. So, I began to step into reactive world this year.</p>
<p>After several days of official reactjs/react-native documentation reading, I start to create my first react-native app. Things changed a lot since the first publish of react-native, now it recommends to use <strong> create-react-native-app </strong> to start a RNA.</p>
<ul>
<li>install create-react-native-app globally</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g create-react-native-app</span><br></pre></td></tr></table></figure>
<ul>
<li>create rn-app with create-react-native-app cli</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ create-react-native-app rn-my-app</span><br></pre></td></tr></table></figure>
<ul>
<li><p>install Expo client in mobile phone to preview your RNA</p>
<p><a href="https://expo.io/tools" target="_blank" rel="noopener">Expo official site</a></p>
</li>
<li><p>enter app dir and start dev server</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd rn-my-app</span><br><span class="line">$ npm start</span><br></pre></td></tr></table></figure>
<p>less than 20 seconds, you will the the following the output in console:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"> &gt; rn-my-app@0.1.0 start /Users/username/mobile/rn-my-app</span><br><span class="line"> &gt; react-native-scripts start</span><br><span class="line"></span><br><span class="line"> 22:40:00: Starting packager...</span><br><span class="line"> Packager started!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">A BIG QR CODE IMAGE HERE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> Your app is now running at URL: exp://192.168.1.103:19000</span><br><span class="line"></span><br><span class="line"> View your app with live reloading:</span><br><span class="line"></span><br><span class="line">   Android device:</span><br><span class="line">     -&gt; Point the Expo app to the QR code above.</span><br><span class="line">        (You&apos;ll find the QR scanner on the Projects tab of the app.)</span><br><span class="line">   iOS device:</span><br><span class="line">     -&gt; Press s to email/text the app URL to your phone.</span><br><span class="line">   Emulator:</span><br><span class="line">     -&gt; Press a (Android) or i (iOS) to start an emulator.</span><br><span class="line"></span><br><span class="line"> Your phone will need to be on the same local network as this computer.</span><br><span class="line"> For links to install the Expo app, please visit https://expo.io.</span><br><span class="line"></span><br><span class="line"> Logs from serving your app will appear here. Press Ctrl+C at any time to stop.</span><br><span class="line"></span><br><span class="line">  › Press a to open Android device or emulator, or i to open iOS emulator.</span><br><span class="line">  › Press s to send the app URL to your phone number or email address</span><br><span class="line">  › Press q to display QR code.</span><br><span class="line">  › Press r to restart packager, or R to restart packager and clear cache.</span><br><span class="line">  › Press d to toggle development mode. (current mode: development)</span><br></pre></td></tr></table></figure>
<p>I tried to use Expo app installed in my Android mobile to scan the QR code, but nothing happened. Then a press <code>a</code> in console, the application showed in screen(my Mac connected to mobile by usb cable).</p>
<p>To see the modified result of the app, just made some changes in App.js then waiting for rebuilding process and new content will present in the screen.</p>
<p>It looks like easy and smooth, everything is OK until I press Ctrl+c to shutdown the dev server.</p>
<blockquote>
<blockquote>
<p>When I tried to restart the packager by <strong> npm start </strong> , it stopped in Starting packager…</p>
</blockquote>
</blockquote>
<p>even waited for couples of minutes, NO further progress AT ALL!!!</p>
<p>Then ctrl+c an restart again repeatedly and repeatedly… no changes.</p>
<p>…</p>
<p>It made me almost crazy for this, the build server can’t start again and development process stopped there also. So, there is no choice but to turn to search engine, finally, I found the post:</p>
<blockquote>
<blockquote>
<p>Stuck in “Starting packager”</p>
</blockquote>
</blockquote>
<blockquote>
<blockquote>
<p><a href="https://github.com/react-community/create-react-native-app/issues/203" target="_blank" rel="noopener">https://github.com/react-community/create-react-native-app/issues/203</a></p>
</blockquote>
</blockquote>
<p>The key solution is the watchman tool to kill all the file monitor process, then would be successful restart.</p>
<p>so, install watchman first:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew update</span><br><span class="line">$ brew install watchman</span><br></pre></td></tr></table></figure>
<p>then, executing the watchman delete all command twice, console print the clear result:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> [username@~] $ watchman watch-del-all</span><br><span class="line"> &#123;</span><br><span class="line">     &quot;version&quot;: &quot;4.9.0&quot;,</span><br><span class="line">     &quot;roots&quot;: [</span><br><span class="line">         &quot;/Users/username/mobile/rn-my-app&quot;</span><br><span class="line">     ]</span><br><span class="line"> &#125;</span><br><span class="line"> [username@~] $ watchman watch-del-all</span><br><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;4.9.0&quot;,</span><br><span class="line">    &quot;roots&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<p>Also, close all the console window(and quit iTerm2) and reopen console.</p>
</blockquote>
</blockquote>
<p> last, executing the restart command in app root:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[liwenzhi@~/mobile/rn-my-app] $ npm start</span><br></pre></td></tr></table></figure>
<p>14 seconds later, the Packager started!</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/03/28/flex-box-vs-grid-layout-in-implementation-of-image-card/" class="next">下一篇</a></div><div class="copyright"><p>© 2018 <a href="https://lwz7512.github.io">Li Wenzhi</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>var $toggle = document.querySelector('.ltmenu');
var $navbar = document.querySelector('ul.nav');
$toggle.addEventListener('click', function(){
 if ($navbar.classList.contains('in')) {
    $navbar.classList.remove('in');
 }else{
    $navbar.classList.add('in');
 }
});</script></body></html>